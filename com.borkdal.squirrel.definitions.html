<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>com.borkdal.squirrel.definitions documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Squirrel 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>com</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>borkdal</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>squirrel</span></div></div></li><li class="depth-4 branch current"><a href="com.borkdal.squirrel.definitions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>definitions</span></div></a></li><li class="depth-4 branch"><a href="com.borkdal.squirrel.entity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>entity</span></div></a></li><li class="depth-4"><a href="com.borkdal.squirrel.postgresql.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>postgresql</span></div></a></li><li class="depth-5"><a href="com.borkdal.squirrel.postgresql.language-def.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>language-def</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="com.borkdal.squirrel.definitions.html#var-add"><div class="inner"><span>add</span></div></a></li><li class="depth-1"><a href="com.borkdal.squirrel.definitions.html#var-compile-sql"><div class="inner"><span>compile-sql</span></div></a></li><li class="depth-1"><a href="com.borkdal.squirrel.definitions.html#var-get-record-type-namespace-string"><div class="inner"><span>get-record-type-namespace-string</span></div></a></li><li class="depth-1"><a href="com.borkdal.squirrel.definitions.html#var-record-type"><div class="inner"><span>record-type</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">com.borkdal.squirrel.definitions</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-add"><h3>add</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Adds a sub-entity to an entity, using <a href="com.borkdal.squirrel.definitions.html#var-record-type">record-type</a> for dispatch:</p>
<pre><code>(compile-sql
 (add
  (select (table-expression (table-name &quot;t&quot;)))
  (column (value-expression &quot;c&quot;))))
  =&gt; &quot;select c from t&quot;
</code></pre><p>If a sequence is provided, the sequence entities will be added separately:</p>
<pre><code>(compile-sql
 (add
  (select (table-expression (table-name &quot;t&quot;)))
  [(column (value-expression &quot;c1&quot;))
   (column (value-expression &quot;c2&quot;))]))
  =&gt; &quot;select c1, c2 from t&quot;
</code></pre><p>Can also be used as a reducer:</p>
<pre><code>(compile-sql
 (reduce add
         (select (table-expression (table-name &quot;t&quot;)))
         [(column (value-expression &quot;c1&quot;))
          (column (value-expression &quot;c2&quot;))
          (column (value-expression &quot;c3&quot;))]))
  =&gt; &quot;select c1, c2, c3 from t&quot;
</code></pre><p>(Examples are using <a href="null">com.borkdal.squirrel.postgresql.language</a>.)</p></div></div></div><div class="public anchor" id="var-compile-sql"><h3>compile-sql</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Compiles the given entity into an SQL string, using <a href="com.borkdal.squirrel.definitions.html#var-record-type">record-type</a> for dispatch.</p></div></div></div><div class="public anchor" id="var-get-record-type-namespace-string"><h3>get-record-type-namespace-string</h3><div class="usage"><code>(get-record-type-namespace-string entity)</code></div><div class="doc"><div class="markdown"><p>Returns the keyword namespace to use for the entity record type - is &ldquo;type&rdquo; for built-in types (i.e., <code>:type/string</code>), and *ns* for user-defined entities.</p></div></div></div><div class="public anchor" id="var-record-type"><h3>record-type</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Returns a qualified keyword identifying the record type of an entity, dispatching on <a href="http://clojuredocs.org/clojure.core/type">type</a>.</p></div></div></div></div></body></html>